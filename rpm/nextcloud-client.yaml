Name: nextcloud-client
Summary: Nextcloud command line tool
# versions higher than this require Qt 5.12, current ones 5.15...
# .. or require WebEngine
Version: 2.6.4
Release: 0
Group: Applications
License: GPLv2
SCM: "https://github.com/nextcloud/desktop"
URL: "https://github.com/nextcloud/desktop"
Sources:
    - '%{name}-%{version}.tar.gz'
Description: |


    %if "%{?vendor}" == "chum"
    PackageName: Nextcloud Client
    Type: console-application
    PackagerName: nephros
    Categories:
     - Utility
     - FileTools
     - NetworkFilesystems
    Custom:
      Repo: https://github.com/nextcloud/desktop
    Icon: https://avatars.githubusercontent.com/u/19211038?s=200&v=4
    Url:
      Homepage: https://nextcloud.com/install/#install-clients
    %endif
SetupOptions: -q -n %{name}-%{version}/upstream
#Macros:
#  - 'foo;bar'
Patches:
  - 'no-webengine.patch'
#Requires:
PkgBR:
  - pkgconfig
  - cmake
  - qt5-qttools-linguist
  - qt5-qmake
  # librsvg-devel
  # qt5-qtwebsockets-devel
  - qtkeychain-devel
PkgConfigBR:
  - openssl
  - zlib
  - sqlite3
  - Qt5Quick
  - Qt5Gui
  - Qt5Svg
  - Qt5Xml
  - Qt5DBus
  - Qt5Concurrent
  - Qt5WebKitWidgets

Configure: cmake
ConfigOptions:
  - '-DBUILD_SHELL_INTEGRATION=0'
  - '-DBUILD_SHELL_INTEGRATION_DOLPHIN=0'
  - '-DBUILD_SHELL_INTEGRATION_ICONS=0'
  - '-DBUILD_SHELL_INTEGRATION_NAUTILUS=0'
  - '-DNO_SHIBBOLETH=1'
Builder: make
NoIconCache: true
#BuildArch: noarch
#AutoSubPackages:
#  - doc
Files:
  - '%license LICENSE'
  - '%{_datadir}/applications/%{name}.desktop'
  - '%{_datadir}/icons/*/*/apps/%{name}.png'
  - '%{_datadir}/icons/*/*/apps/%{name}.svg'
  - '%{_datadir}/%{name}/translations/*.qm'
  - '%{_datadir}/%{name}/qml/*'
